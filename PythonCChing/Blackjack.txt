
FUN createDeck()
    VAR deck = []
    VAR suit = [2,3,4,5,6,7,8,9,10,10,10,10,11]
    FOR i = 1 TO 4 THEN
        VAR lenSuit = LEN(suit)
        FOR j = 0 TO lenSuit - 1 THEN
            APPEND(deck, suit / j)
        END
    END
    RETURN deck
END

FUN shuffle(deck)
    VAR n = LEN(deck)
    FOR i = 0 TO n - 1 THEN
        VAR j = RANDOM_INT(0, n - 1)
        VAR temp = deck / i
        UPDATE(deck, i, deck / j)
        UPDATE(deck, j, temp)
    END
    RETURN deck
END

FUN dealCard(deck)
    VAR card = deck / 0
    POP(deck, 0)
    RETURN card
END


FUN handValue(hand)
    VAR sum = 0
    VAR lenHand = LEN(hand)
    FOR i = 0 TO lenHand - 1 THEN
        VAR sum = sum + hand / i
    END
    RETURN sum
END


FUN printHand(name, hand)
    PRINT(name + " roka: " + hand)
    PRINT("Vrednost: " + handValue(hand))
END


FUN blackjack()

    VAR deck = createDeck()
    deck = shuffle(deck)
    
 
    VAR playerHand = []
    VAR dealerHand = []
    

    APPEND(playerHand, dealCard(deck))
    APPEND(dealerHand, dealCard(deck))
    APPEND(playerHand, dealCard(deck))
    APPEND(dealerHand, dealCard(deck))
    

    PRINT("Delilec pokaže: " + dealerHand / 0)
    printHand("Igralec", playerHand)
    
    
    WHILE handValue(playerHand) < 21 THEN
        VAR choice = INPUT("Želiš vzeti karto (h) ali ostati (s)? ")
        IF choice == "h" THEN
            APPEND(playerHand, dealCard(deck))
            printHand("Igralec", playerHand)
            IF handValue(playerHand) > 21 THEN
                PRINT("Preveč! Izgubiš.")
                RETURN
            END
        ELSE
            BREAK
        END
    END
    
   
    WHILE handValue(dealerHand) < 17 THEN
        APPEND(dealerHand, dealCard(deck))
    END
    PRINT("Delilčeva končna roka:")
    printHand("Delilec", dealerHand)
    
    VAR playerScore = handValue(playerHand)
    VAR dealerScore = handValue(dealerHand)
    
    
    IF dealerScore > 21 OR playerScore > dealerScore THEN
        PRINT("Igralec zmaga!")
    ELIF playerScore == dealerScore THEN
        PRINT("Izenačeno (push)!")
    ELSE
        PRINT("Delilec zmaga!")
    END
END


FUN main()
    blackjack()
END

main()
